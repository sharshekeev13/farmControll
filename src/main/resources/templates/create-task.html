<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Aufgabe</title>
</head>
<body>
<h2 th:text="${task.id == null} ? 'Neue Aufgabe erstellen' : 'Aufgabe bearbeiten'"></h2>

<form th:action="@{${task.id} == null ? '/tasks/save' : '/tasks/update'}"
      th:object="${task}" method="post">

  <input type="hidden" th:field="*{id}"/>

  <label>Titel:</label>
  <input type="text" th:field="*{name}" required/><br/>

  <label>Beschreibung:</label>
  <textarea th:field="*{description}"></textarea><br/>

  <label>Startzeit:</label>
  <input type="datetime-local" th:field="*{startTime}"/><br/>

  <label>Endzeit:</label>
  <input type="datetime-local" th:field="*{endTime}"/><br/>

  <label>Status:</label>
  <select th:field="*{taskStatus}">
    <option th:each="status : ${statuses}" th:value="${status}" th:text="${status}"></option>
  </select><br/>

  <label>Benutzer:</label>
  <select th:field="*{userId}">
    <option th:each="u : ${users}" th:value="${u.id}" th:text="${u.username}"></option>
  </select><br/>

  <label>Standort:</label>
  <select th:field="*{locationId}">
    <option th:each="l : ${locations}" th:value="${l.id}" th:text="${l.name}"></option>
  </select><br/>

  <label>Geräte:</label>
  <select multiple th:field="*{equipmentIds}">
    <option th:each="e : ${equipments}" th:value="${e.id}" th:text="${e.equipmentName}"></option>
  </select><br/>

  <button type="submit">Speichern</button>
</form>

<a th:href="@{/tasks}">Zurück zur Liste</a>
</body>
</html>
